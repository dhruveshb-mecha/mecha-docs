---
title: Working with variables
hide_table_of_contents: false
---
### **Understanding U-Boot Environment Variables**

U-Boot uses environment variables to configure boot behavior, kernel parameters, and device settings. These variables are stored in persistent storage (eMMC, NAND, or SPI flash) and can be modified at runtime.

### **Checking Current Variables**

To view all available U-Boot environment variables, use:

```sh
printenv
```

To check a specific variable:

```sh
printenv bootcmd
```

---

## **Commonly Used U-Boot Variables on Mecha Comet**

| Variable | Purpose |
| --- | --- |
| `bootcmd` | The main command executed at boot. It loads the kernel and boots the OS. |
| `bootargs` | Kernel command-line parameters, passed to the Linux kernel. |
| `console` | Defines the serial console device for debugging (e.g., `ttyS0,115200`). |
| `fdtfile` | Specifies the device tree file to load. |
| `fdt_addr_r` | Memory address where the device tree is loaded. |
| `kernel_addr_r` | Load address for the Linux kernel in RAM. |
| `root` | Specifies the root filesystem location. |

---

## **Modifying U-Boot Variables**

### **Temporarily Changing a Variable (Does Not Persist After Reboot)**

You can modify variables for the current session using:

```sh
setenv bootargs "console=ttyS0,115200 root=/dev/mmcblk0p2 rw"
```

To verify the change:

```sh
printenv bootargs
```

### **Permanently Saving Variables**

To save changes so they persist after reboot:

```sh
saveenv
```

---

## **Key U-Boot Variables for Booting Mecha Comet**

### **Boot Process**

The Mecha Comet device follows this general boot sequence:

1. **U-Boot loads from storage (eMMC/NAND/SPI).**
2. **It sets up boot variables** (`bootcmd`, `bootargs`, etc.).
3. **It loads the kernel, device tree, and root filesystem.**

### **Example Boot Variables for Mecha Comet**

```sh
setenv bootargs "console=ttyS0,115200 root=/dev/mmcblk0p2 rw"
setenv bootcmd "mmc dev 0; ext4load mmc 0:1 ${kernel_addr_r} /boot/zImage; bootz ${kernel_addr_r} - ${fdt_addr_r}"
setenv fdtfile "mecha-comet.dtb"
setenv fdt_addr_r "0x83000000"
setenv kernel_addr_r "0x82000000"
saveenv
```

### **Explanation of Key Variables**

- `bootcmd`: Commands to load and boot the Linux kernel from eMMC.
- `bootargs`: Kernel parameters, such as the root filesystem and console settings.
- `fdtfile`: Specifies the correct device tree for Mecha Comet.

---

## **Restoring Default U-Boot Variables**

If you need to reset everything to default settings:

```sh
env default -a
saveenv
```

Reboot the device after resetting:

```sh
reset
```

---

## **Conclusion**

U-Boot variables control the boot process and can be customized for **Mecha Comet** to optimize boot time, enable debugging, and set up the correct kernel and root filesystem.
